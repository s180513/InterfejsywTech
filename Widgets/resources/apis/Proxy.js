"use strict";if(typeof window.SmaCustomWidget==="undefined"){window.SmaCustomWidget={}}window.SmaCustomWidget.proxy={enumWindowType:{INPUT:0,MSGBOX:1},enumStatus:{SUCCESS:0,SERVER_ERROR:-1,ACTION_DISABLED:-2,SECURITY_REQUIREMENT:-3,INVALID_COMMAND:-4,INVALID_PROPERTY:-5},statusMessages:{success:"",serverError:null,actionDisabled:"Execution not allowed.",securityRequirement:"Security rights not enough.",invalidCommand:"Invalid command name.",invalidProperty:"Invalid property name."},lastStatus:{resultCode:0,message:""},host:{win:null,doc:null,widget:null,screenId:null,_showWindow:null,showWindow:function e(t,n){if(this._showWindow){this._showWindow(t,n)}},onCloseWindowCallback:null,onCloseWindow:function e(t){if(this.onCloseWindowCallback){this.onCloseWindowCallback(t)}}},ready:false,autoResize:true,isSupportPassive:null,propertiesInfo:{},securityLevels:[],_eventListeners:{},_onLoadListeners:[],_onHideListeners:[],_onShowListeners:[],_onSecurityChangeListeners:[],_onTouchEventListeners:[],set:function e(t,n){var i=null;if(n)i=this._eventListeners[t.propName];else i=this._eventListeners["__"+t.propName];if(!i&&window.cwidget){i=window.cwidget.onChange.bind(window.cwidget)}if(i)i(t);else{this.lastStatus.resultCode=this.enumStatus.INVALID_PROPERTY;this.lastStatus.message=this.statusMessages.invalidProperty}},on:function e(t,n,i){var r=i?t:"__"+t;this._eventListeners[r]=n.bind(i||this)},addOnLoad:function e(t,n){this._onLoadListeners.push(t.bind(n))},addOnShow:function e(t,n){this._onShowListeners.push(t.bind(n))},addOnHide:function e(t,n){this._onHideListeners.push(t.bind(n))},addOnSecurityChange:function e(t,n){this._onSecurityChangeListeners.push(t.bind(n))},addOnTouchEvent:function e(t,n){this._onTouchEventListeners.push(t.bind(n))},registerTouchEvents:function e(){var n=this;var t=function e(t){n.notifyOnTouchEvent(t)};if("ongesturestart"in window){document.addEventListener("gesturestart",t,false)}this._registerTouchEventsHandler(document,t,false)},registerTouchEventException:function e(t){if(t!=null){var n=function e(t){if(t!=null)t.isHandledByAnimation=true};this._registerTouchEventsHandler(t,n,true)}},_registerTouchEventsHandler:function e(t,n,i){this.isSupportPassive=this.isSupportPassive!=null?this.isSupportPassive:this.isSupportPassiveOption();if(!t||!n)return;t.addEventListener("keydown",n,i);t.addEventListener("keyup",n,i);if(typeof t.onmousewheel!="undefined"){t.addEventListener("mousewheel",n,this.getPassiveOption(null,i,false))}else if(typeof t.onwheel!="undefined"){t.addEventListener("wheel",n,this.getPassiveOption(null,i,false))}t.addEventListener("mousedown",n,i);t.addEventListener("mouseup",n,i);t.addEventListener("mousemove",n,this.getPassiveOption(null,true,false));t.addEventListener("dblclick",n,i);if(typeof t.ontouchstart!="undefined"&&typeof t.ontouchend!="undefined"){t.addEventListener("touchstart",n,i);t.addEventListener("touchend",n,i);t.addEventListener("touchcancel",n,i);t.addEventListener("touchmove",n,this.getPassiveOption(null,i,false))}else if(typeof t.onpointerdown!="undefined"&&typeof t.onpointerup!="undefined"){t.addEventListener("pointerdown",n,i);t.addEventListener("pointerup",n,i);t.addEventListener("pointercancel",n,i);t.addEventListener("pointermove",n,this.getPassiveOption(null,i,false));if(typeof t.onpointerover!="undefined"){t.addEventListener("pointerout",n,i);t.addEventListener("pointerover",n,i)}else{t.addEventListener("pointerleave",n,i);t.addEventListener("pointerenter",n,i)}}else if(typeof t.onmspointerdown!="undefined"&&typeof t.onmspointerup!="undefined"){t.addEventListener("mspointerdown",n,i);t.addEventListener("mspointerup",n,i);t.addEventListener("mspointercancel",n,i);t.addEventListener("mspointermove",n,this.getPassiveOption(null,i,false));t.addEventListener("mspointerout",n,i);t.addEventListener("mspointerover",n,i)}else{console.log("Browser does not support touch.")}},isSupportPassiveOption:function e(){var t=false;try{var n={get passive(){t=true}};window.addEventListener("test",n,n);window.removeEventListener("test",n,n)}catch(e){t=false}return t},getPassiveOption:function e(t,n,i,r){t=t!=null?t:this.isSupportPassive;if(!t)return n!=null?n:false;var s={};if(n!=null)s.capture=n;if(i!=null)s.passive=i;if(r!=null)s.once=r;return s},notifyHostIsPrepared:function e(){var t=null,n=null;for(var i=0;i<this._onLoadListeners.length;i++){t=this._onLoadListeners[i];if(!t){console.warn("CustomWidget: Invalid onload listener.");continue}t()}try{var r=new SmaCustomWidget.Helper;var s=r.getScriptTag("proxy.js");var o=s.getAttribute("autoResize");if(s&&o=="disable"){this.autoResize=false}if(this.autoResize){window.SmaCustomWidget.resizeManager.activate()}}catch(e){console.warn("CustomWidget: Could not load ResizeManager.js.")}},notifyOnShow:function e(){var t=null;for(var n=0;n<this._onShowListeners.length;n++){t=this._onShowListeners[n];if(!t){console.warn("CustomWidget: Invalid onShow listener.");continue}t()}},notifyOnHide:function e(){var t=null;for(var n=0;n<this._onHideListeners.length;n++){t=this._onHideListeners[n];if(!t){console.warn("CustomWidget: Invalid onHide listener.");continue}t()}},notifySecurityLevelsChanged:function e(t){var n=null;this.securityLevels=t;for(var i=0;i<this._onSecurityChangeListeners.length;i++){n=this._onSecurityChangeListeners[i];if(!n){console.warn("CustomWidget: Invalid security change listener.");continue}n(this.securityLevels)}},notifyOnTouchEvent:function e(t){var n=null;for(var i=0;i<this._onTouchEventListeners.length;i++){n=this._onTouchEventListeners[i];if(!n){console.warn("CustomWidget: Invalid Touch Event listener.");continue}n(t)}},executeCommand:function e(t,n){this.host.widget.executeCommand(t,n)},getPosition:function e(){return this.host.widget.getPosition()},getSize:function e(){return this.host.widget.getSize()},applyAutoSize:function e(t,n,i,r){return this.host.widget.applyAutoSize(t,n,i,r)},getParentScreenSize:function e(){return this.host.widget.getParentScreenSize()}};"use strict";function _____x_____helper(){this.numToRGB=function(e){var t=0;var n=0;var i=0;var r=0;if(isNaN(e))return null;t=parseInt(e);n=t&255;i=t>>8&255;r=t>>16&255;return"rgb("+n+","+i+","+r+")"};this.numToKey=function(e){var t=""+e;var n="0000";return n.substring(0,n.length-t.length)+t};this.numToTimePart=function(e){var t=""+e;var n="00";return n.substring(0,n.length-t.length)+t};this.strToDate=function(e,t){var n=null;if(t){n=moment.utc(e);n=n.local()}else{if(e[e.length-1]=="Z"){e=e.substr(0,e.length-1)}n=moment(e)}if(!n||!n.isValid()){return e}var i=this.numToTimePart(n.year());if(parseInt(i)<2e3){var r=i.substr(2);if(parseInt(r)>29){i="19"+r}else{i="20"+r}}return this.numToTimePart(n.month()+1)+"/"+this.numToTimePart(n.date())+"/"+i};this.strToTime=function(e,t,n){var i=null;if(t){i=moment.utc(e);i=i.local()}else{if(e[e.length-1]=="Z"){e=e.substr(0,e.length-1)}i=moment(e)}if(!i||!i.isValid()){return e}return this.numToTimePart(i.hour())+":"+this.numToTimePart(i.minute())+":"+this.numToTimePart(i.second())+(n?"."+this.numToTimePart(i.millisecond()):"")};this.isValidTime=function(e){var t=e.split(":");if(t.length!=3){return false}if(isNaN(t[0])){return false}if(parseInt(t[0])>23){return false}if(isNaN(t[1])){return false}if(parseInt(t[1])>59){return false}if(isNaN(t[2])){return false}if(parseFloat(t[2])>59){return false}return true};this.isValidDate=function(e){var t=e.split("/");if(t.length!=3){return false}if(isNaN(t[0])){return false}if(parseInt(t[0])>12){return false}if(isNaN(t[1])){return false}if(parseInt(t[1])>31){return false}if(isNaN(t[2])){return false}return true};this.isValidDateTime=function(e){var t=e.split(" ");if(t.length!=2){return false}if(!this.isValidDate(t[0])){return false}return this.isValidTime(t[1])};this.strToDateTime=function(e,t,n){return this.strToDate(e,t)+" "+this.strToTime(e,t,n)};this.parseFontStyle=function(e,t){var n=false,i=false,r=false,s=false,o=false,a={fontStyle:"",fontWeight:""};if(!e||typeof e!=="string"||e.length===0){return a}n=e.toLowerCase().indexOf("regular")>=0;if(n){return a}i=e.toLowerCase().indexOf("italic")>=0;if(i){a.fontStyle="italic";t&&t.style&&(t.style.fontStyle=a.fontStyle)}r=e.toLowerCase().indexOf("bold")>=0;if(r){a.fontWeight="bold";t&&t.style&&(t.style.fontWeight=a.fontWeight)}s=e.toLowerCase().indexOf("black")>=0;if(s){a.fontWeight="bolder";t&&t.style&&(t.style.fontWeight=a.fontWeight)}o=e.toLowerCase().indexOf("oblique")>=0;if(o){a.fontStyle="italic";t&&t.style&&(t.style.fontStyle=a.fontStyle)}return a};this.addFindToArray=function(){if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{value:function e(t){if(this===null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof t!=="function"){throw new TypeError("predicate must be a function")}var n=Object(this);var i=n.length>>>0;var r=arguments[1];var e;for(var s=0;s<i;s++){e=n[s];if(t.call(r,e,s,n)){return e}}return undefined}})}};this.getScriptTag=function(e){var t=null;var n=null;var i=0;if(!e){return null}t=document.getElementsByTagName("script");if(!t){return null}for(i=0;i<t.length;i++){n=t[i].getAttribute("src");if(!n){continue}if(n.toLowerCase().indexOf(e.toLowerCase())>=0){return t[i]}}return null};this._CSVToArray=function(e,t){if(!e)return[];t=t||",";var n=new RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+t+"\\r\\n]*))","gi");var i=[[]];var r=null;while(r=n.exec(e)){var s=r[1];if(s.length&&s!=t){i.push([])}if(r[2]){var o=r[2].replace(new RegExp('""',"g"),'"')}else{var o=r[3]}i[i.length-1].push(o)}return i};this.csvToJson=function(e,t){var n=this._CSVToArray(e,",");var i=[];for(var r=0;r<n.length;r++){i[r]={};for(var s=0;s<t.length&&s<n[r].length;s++){var o=t[s];i[r][o]=n[r][s]}}return i}}if(typeof window.SmaCustomWidget==="undefined"){window.SmaCustomWidget={}}window.SmaCustomWidget.Helper=_____x_____helper;"use strict";function _____x_____SmaCustomWidgetResizeManager(){var r=null,a=null,u=null,l=null,f=null,s=null,e=false,o=null,d=null,h=null,t=function e(t){var n;var i=t.length;var r=false;var s=0;var o=0;var a=0;for(n=0;n<i;++n){s=t[n].addedNodes.length;o=t[n].removedNodes.length;if(t[n].type=="childList"){for(a=0;a<s;++a){v(t[n].addedNodes[a],true);S(t[n].addedNodes[a])}for(a=0;a<o;++a){if(C(t[n].removedNodes[a])){r=true}}}else{if(C(t[n].target)){r=true}}}if(r){if(l){clearTimeout(l)}l=setTimeout(p.bind(this),0)}},p=function e(t){var n=document.getElementsByTagName("*"),i=n.length,r=0;c();for(r=0;r<i;++r){v(n[r],false);if(t){S(n[r])}}if(f==null){o.applyAutoSize(parseInt(s.l),parseInt(s.t),parseInt(s.w),parseInt(s.h));h={l:s.l,t:s.t};d={w:s.w,h:s.h}}l=null},c=function e(){f=null;if(!a){h={l:s.l,t:s.t};d={w:s.w,h:s.h}}},v=function e(t,n){var i=null,r=false,s=t.childNodes.length,o;if(!t||!t.parentNode||t.tagName=="HTML"||t.tagName=="HEAD"||t.tagName=="BODY"||t.tagName=="SCRIPT"||t.tagName=="TITLE"){return}if(t.getBoundingClientRect){i=t.getBoundingClientRect()}else{console.warn("CustomWidget: element has not getBoundingClientRect defined.");return}if(!f){f={t:{n:t,v:i.top},l:{n:t,v:i.left},r:{n:t,v:i.right},b:{n:t,v:i.bottom}}}if(!a){a={x:0,y:0}}if(f.t.v+a.x>i.top){f.t.v=i.top;f.t.n=t;r=true}if(f.l.v+a.y>i.left){f.l.v=i.left;f.l.n=t;r=true}if(f.r.v<=i.right){f.r.v=i.right;f.r.n=t;r=true}if(f.b.v<=i.bottom){f.b.v=i.bottom;f.b.n=t;r=true}if(r){if(u){clearTimeout(u)}u=setTimeout(g.bind(this),500)}if(n){for(o=0;o<s;++o){e(t.childNodes[o],n)}}},g=function e(){var t={l:null,t:null,w:null,h:null},n={x:a.x,y:a.y};if(!f||!a){return}t.l=i();t.t=m();_(t.l);L(t.t);t.w=w(n.x);t.h=y(n.y);document.documentElement.style.transform="translate("+a.x+"px ,"+a.y+"px)";o.applyAutoSize(parseInt(t.l),parseInt(t.t),parseInt(t.w),parseInt(t.h));h={l:t.l,t:t.t};d={w:t.w,h:t.h};u=null},i=function e(){return Math.min(h.l+f.l.v,s.l)},m=function e(){return Math.min(h.t+f.t.v,s.t)},w=function e(t){var n=f.r.v-t+a.x,i;n=Math.max(n,s.w);if(s.w>=n&&Math.abs(s.w-n)<a.x){n+=a.x}i=n-a.x;if(i<s.w){n+=s.w-i}return n},y=function e(t){var n=f.b.v-t+a.y,i;n=Math.max(n,s.h);if(s.h>=n&&Math.abs(s.h-n)<a.y){n+=a.y}i=n-a.y;if(i<s.h){n+=s.h-i}return n},_=function e(t){if(f.l.v<0){if(f.l.v>0&&h.l>=0){a.x-=h.l-t}else{a.x+=h.l-t}}else{if(a.x>0){a.x+=Math.min(f.l.v,a.x)*-1}}},L=function e(t){if(f.t.v<0){if(f.t.v>0&&h.t>=0){a.y-=h.t-t}else{a.y+=h.t-t}}else{if(a.y>0){a.y+=Math.min(f.t.v,a.y)*-1}}},S=function e(t){var n=t.childNodes.length,i;r.observe(t,{attributes:true,childList:true,characterData:true});for(i=0;i<n;++i){e(t.childNodes[i])}},C=function e(t){var n,i=t.childElementCount;if(!f){return false}if(f.t.n==t||f.l.n==t||f.r.n==t||f.b.n==t){return true}for(n=0;n<i;n++){if(e(t.childNodes[n]))return true}return false};this.activate=function(){if(e){return}e=true;o=window.SmaCustomWidget.proxy;h={l:parseInt(o.getPosition().l),t:parseInt(o.getPosition().t)};d={w:parseInt(o.getSize().w),h:parseInt(o.getSize().h)};s={l:h.l,t:h.t,w:d.w,h:d.h};if(!r){setTimeout(function(){if(typeof MutationObserver==="undefined"){console.warn("CustomWidget: MutationObserver is not defined.")}else{r=new MutationObserver(t);if(r){p(true)}}}.bind(this),100)}}}if(typeof window.SmaCustomWidget==="undefined"){window.SmaCustomWidget={}}window.SmaCustomWidget.resizeManager=new _____x_____SmaCustomWidgetResizeManager;"use strict";(function(){var e=new SmaCustomWidget.Helper;var t=e.getScriptTag("proxy.js");var n="";var i=null;if(!t||!t.getAttribute("cwidget")){return}window.cwidget={_proxy:null,_config:null,_properties:null,_infosLastState:null,_listeners:new Map,parent:window.frameElement,enumWindowType:window.SmaCustomWidget.proxy.enumWindowType,init:function e(t){this._infosLastState=new Map;this._config=t;this._proxy=window.SmaCustomWidget.proxy;this._proxy.addOnLoad(this._onLoad.bind(this));this._properties=new Map;this._createProperties();this._proxy.ready=true},_onLoad:function e(){var t="";var n=null;var i=null;for(t in this._config.properties){i=this._config.properties[t];n=i.name;if(!i.value){if(i.type&&i.type.toLowerCase()==="array"){i.value=[]}else{i.value=""}}this._properties.set(n,i);this._proxy.on(n,this.onChange,this)}},onChange:function e(t){if(!this._infosLastState){return}var n=null;var i=-1;this._infosLastState.set(t.propName,JSON.parse(JSON.stringify(t)));if(this._properties===null||this._properties.size===0){return}n=this._properties.get(t.propName);if(n){if(!n.type||n.type.toLowerCase()!=="array"){n.value=t.value}}else{var r=t.propName.substr(0,t.propName.length-4);var s=t.propName.substr(-4);if(this._properties.has(r)&&isNaN(s)===false){t.propName=r;i=parseInt(s);n=this._properties.get(r);if(n.type&&n.type.toLowerCase()==="array"){n.value[i]=t.value}}}this._notifyChange(t.propName,i)},_notifyChange:function e(t,n){var i=0;var r=this._listeners.get(t);if(!r){return}for(i=0;i<r.length;i++){r[i](t,n)}},_createProperties:function e(){var i=this;var t="";var r=null;var n=function e(){var n=i._config.properties[t].name;Object.defineProperty(i,n,{get:function e(){return i._properties.get(n).value},set:function e(t){r=i._properties.get(n);if(r&&(!r.type||r.type.toLowerCase()!=="array")){r.value=t;if(i._proxy){i._proxy.set({propName:n,value:t})}}}})};for(t in this._config.properties){n()}},dispatchEvent:function e(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++){i[r-1]=arguments[r]}this._proxy&&this._proxy.executeCommand(t,i)},on:function e(t,n){var i=this;var r=undefined;if(!n||typeof n!=="function"){return}if(this._listeners.has(t)===false){this._listeners.set(t,[])}this._listeners.get(t).push(n);if(this._infosLastState!==null){setTimeout(function(){r=i._infosLastState.get(t);if(r!==undefined){i.onChange(r)}},0)}},getPropertyId:function e(t){if(this._proxy&&this._proxy.propertiesInfo&&this._proxy.propertiesInfo[t]){return this._proxy.propertiesInfo[t].id}else{return null}},get host(){if(this._proxy&&this._proxy.host){return this._proxy.host}else{return null}},get services(){if(this._proxy&&this._proxy.host&&this._proxy.host.win&&this._proxy.host.win.services){return this._proxy.host.win.services}else{return{updateData:function e(t,n,i,r,s,o){console.warn("The function\t\t\t\t\t\t'updateData(screenId, ownerId, row, column, values, callback)'\t\t\t\t\t\t is not implemented.")}}}},set avoidInteraction(e){if(this._proxy&&this._proxy.host&&this._proxy.host.widget&&this._proxy.host.widget._frame){this._proxy.host.widget._frame.style.pointerEvents=e===true?"none":""}}};n=t.getAttribute("cwidget");var r=new XMLHttpRequest;r.open("GET","./"+n+".wjson");r.send(null);i=setInterval(function(){if(r.readyState!==4){return}clearInterval(i);if(!window.cef_apply_auto_size&&r.status!==200){console.error("Could not load the "+n+"configuration file");return}try{window.cwidget.init(JSON.parse(r.responseText))}catch(e){console.error(e.message)}r=null},0)})();